# 🔸 8-4 Aggregate

## 집합체(Aggregate)

* 정의 \
  애그리거트란 관련된 **객체**들을 모아 하나의 단위로 취급하는 개념으로, 객체지향 프로그래밍에서, 애그리거트는 객체 간의 관계를 정의하는 방법 중 하나로, 논리적으로 관련된 객체들을 그룹화하여 하나의 묶음으로 다룬다.\
  _**쉽게 말해 여러 개의 객체를 묶어 하나의 큰 객체로 다루는 것이다.**_ \

* 왜 사용하는가?\
  애그리거트는 DDD 디자인 패턴에서 중요한 개념 중 하나로 애그리거트를 사용하여 복잡한 객체 간의 관계를 더 명확히 표현하고, 응용 프로그램의 유지 보수성과 확장성을 높일 수 있다. 또한 애그리거트를 사용해 데이터베이스 트랜잭션 처리를 단순화하고, 일관성을 유지할 수 있다.\

* 특징(구성)\
  애그리거트는 일반적으로 Entity, Value로 구성되고, 애그리거트는 엔티티와 밸류의 관계를 나타내는 **루트 root** 엔티티를 포함하며 루트 엔티티는 애그리거트에 속한 다른 객체들과 관계를 정의한다. 애그리거트는 **불변성**을 유지하며, 내부 구현을 캡슐화한다.\

* 사용예시\
  예를 들어 게시판의 글과 댓글을 묶어서 애그리거트로 만들 수 있고, 이를 통해 글과 댓글관에 관계를 더 명확하게 표현하고, 데이터베이스 처리를 단순화할 수 있다.\

* 개인적인 생각(추가적인 질문 또는 내용)\

* 레퍼런스 모음\
  [https://velog.io/@hope0206/DDD-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EB%8F%84-%EC%84%A4%EA%B3%84-%EC%95%A0%EA%B7%B8%EB%A6%AC%EA%B1%B0%ED%8A%B8Aggregate-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0](https://velog.io/@hope0206/DDD-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EB%8F%84-%EC%84%A4%EA%B3%84-%EC%95%A0%EA%B7%B8%EB%A6%AC%EA%B1%B0%ED%8A%B8Aggregate-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0)

## 불변식

* 정의 \
  객체나 데이터 구조의 상태가 생성된 후에 변경되지 않음을 보장하는 조건이다. 불변식은 한 번 설정되면 변경되지 않으며, 객체나 데이터 구조가 생성된 후에는 항상 유효한 상태를 유지해야 한다.\

* 왜 필요한가?\
  불변식은 프로그램의 정확성과 안정성을 보장하는 데 중요한 역할을 한다.\

* 특징
  1. **스레드 안전성(Thread Safety)**: 여러 스레드에서 동시에 객체를 사용해도 안전하게 동작할 수 있다. 왜냐하면 상태가 변경되지 않기 때문에 동시 수정에 대한 걱정이 없다.
  2. **코드 예측성(Predictability)**: 객체의 상태가 변하지 않기 때문에 다른 코드에서 객체의 상태를 변경할 우려가 없다. 이는 코드를 이해하고 디버깅하기 쉽게 만든다.
  3. **병합 및 공유(Sharing and Sharing)**: 불변 객체는 안전하게 다른 객체와 공유될 수 있다. 객체의 복사본을 만들지 않고도 안전하게 객체를 전달하고 공유할 수 있다.
  4. **캐싱 및 최적화(Caching and Optimization)**: 불변 객체는 한 번 생성된 후에는 변경되지 않기 때문에 동일한 객체를 다시 생성할 필요가 없다. 이러한 특성은 캐싱과 최적화에 유용하게 사용될 수 있다.
  5. **디자인 간소화(Simplification of Design)**: 불변 객체는 객체의 상태를 변경할 필요가 없기 때문에 코드의 복잡성을 줄일 수 있다. 코드의 예측 가능성과 간결성을 향상시킨다.\

* 사용예시\
  Java에서 `String` 클래스는 불변 객체이다. 한 번 생성된 문자열은 변경되지 않으며, 새로운 문자열을 생성할 때 이전 문자열을 변경하는 대신 새로운 문자열을 반환한다.\

* 개인적인 생각(추가적인 질문 또는 내용)\

* 레퍼런스 모음\
  chatGPT

## 트랜잭션적 일관성과 결과적 일관성

* 차이점
  1. **트랜잭션적 일관성(Transactional Consistency)**:
     * 트랜잭션적 일관성은 데이터베이스 트랜잭션(Transaction)을 사용하여 데이터 일관성을 유지하는 방식을 말한다.
     * 트랜잭션은 여러 데이터 조작 연산(예: 읽기, 쓰기, 갱신)을 원자적으로 실행하여 데이터베이스의 일관성을 보장한다.
     * 트랜잭션적 일관성은 데이터베이스에서 읽거나 쓸 때 일관성 있는 상태를 유지하고, 트랜잭션이 완료되면 데이터베이스는 일관성 있는 상태로 변환된다.
     * 일관성 경계안에서 사용한다.\

  2. **결과적 일관성(Eventual Consistency)**:
     * 결과적 일관성은 분산 시스템에서 데이터 일관성을 유지하기 위한 접근 방식 중 하나이다.
     * 결과적 일관성은 시간이 지남에 따라 시스템의 모든 복제본이 동일한 상태로 수렴할 것이라는 개념을 기반으로 한다.
     * 결과적 일관성에서는 각 복제본이 독립적으로 동작하며 변경 사항을 다른 복제본에 비동기적으로 전파한다. 이 과정에서 일시적으로 데이터의 상태가 일관성이 없을 수 있지만, 시간이 지나면 모든 복제본이 동일한 상태를 가지게 된다.
     * 일관성 경계밖에서 사용한다.
* 특징\

* 개인적인 생각(추가적인 질문 또는 내용)\

* 레퍼런스 모음\
  chatGPT

