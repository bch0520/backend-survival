# 🔸 5-3 Spring Test

## 통합테스트

* 정의 \
  단위 테스트보다 더 큰 동작을 달성하기 위해 여러 모듈들을 모아 이들이 의도대로 협력하는지 확인하는 테스트
* 특징\
  1\) 개발자가 변경할 수 없는 부분까지 묶어 검증할 때 사용한다.\
  2\) DB에 접근하거나 전체 코드와 다양한 환경이 제대로 동작하는지 필요한 모든 작업을 수행 할 수 있다.\
  3\) 통합테스트가 응용프로그램이 완전하게 작동하는 걸 무조건 증명하진 않는다.
* 장 / 단점\
  1\) 단위테스트에서 발견하기 어려운 버그(환경과 관련된 버그 등)를 찾을 수 있다.\
  2\) 단위테스트 보다 더 많은 코드를 테스트하기 때문에 신뢰성이 떨어질 수 있다.\
  3\) 어디서 에러가 발생했는지 확인하기 쉽지 않아 유지보수 하기가 힘들다.\

* 사용방법\
  @SpringBootTest 어노테이션으로 통합 테스트를 작성할 수 있다.\

* 개인적인 생각(추가적인 질문 또는 내용)\

* 레퍼런스 모음\
  [https://amaran-th.github.io/Spring/\[Spring\]%20Test/](https://amaran-th.github.io/Spring/\[Spring]%20Test/)

## @Autowired

* 정의 \
  생성자, Setter, 필드에 이 어노테이션을 붙일 수 있고, 이는 의존성을 주입하는 역할을 한다.\

*   사용방법\
    1\. 생성자 주입(가장 권장되는 방법)\
    &#x20;클래스의 생성자에 @Autowired를 붙여 해당 클래스 타입의 필드들을 찾아 등록하도록 한다.

    &#x20; 생성자가 하나일 경우 어노테이션을 붙이지 않아도 해당 생성자를 자동 주입의 대상으로 인식한다.\
    2\. 수정자 주입\
    Setter나 메서드에 @Autowired를 붙여 해당 클래스 타입의 빈을 찾아와 의존성을 주입한다. \
    생성 시점 이후에 메서드를 호출하여 의존성을 변경할 수 있으나 필드가 외부에서 변경될 수 있다는 점과 의존성이 필요한 시점에 주입되지 않을 수 있다는 위험이 존재한다.\
    3\. 필드 주입\
    가장 간단하게 주입하는 방법으로 필드에 @Autowired를 붙여 의존성을 주입하는 방법이다.\
    코드는 가장 간결하나 수정자 주입과 마찬가지로 필드가 final이 아니므로 변경될 여지가 있다.

    &#x20;메서드와 필드 주입 시의 메서드, 필드의 접근제어자는 private도 가능하다.\

*   생성자 주입이 가장 권장되는 이유

    1. 필수적인 의존성의 주입 시점을 보장할 수 있다.
    2. 필드를 final로 선언이 가능하여 외부에서의 변경 가능성을 낮춘다.
    3. 의존성 주입이 한 곳(생성자)에서만 일어나므로 필요한 의존성을 한곳에서 모아서 확인할 수 있다.
    4. 순수 자바 코드로의 테스트가 용이하다.
    5. Bean의 순환 참조 문제를 방지할 수 있다.


* 레퍼런스 모음\
  [https://jaehee329.tistory.com/28](https://jaehee329.tistory.com/28)\


## @SpyBean

* 정의 \
  SpyBean은 given-when-then에서 given에서 선언한 코드를 제외하고 모두 실제의 코드를 사용하는 기능을 한다.
* 왜 필요한가?\
  애플리케이션을 테스트 할 때 불필요한 메서드들도 같이 테스트가 이루어지기 때문에 특정 부분을 제외하고 효율적으로 테스트하기 위해 필요하다.
* 특징\

* 사용예시\

* 개인적인 생각(추가적인 질문 또는 내용)\
  비교적 제외할 내용이나 메서드가 적을 때 SpyBean을 사용해야 되는 것 같다.
* 레퍼런스 모음\
  [https://jojoldu.tistory.com/226](https://jojoldu.tistory.com/226)\
  [https://kth990303.tistory.com/370](https://kth990303.tistory.com/370)

## MockMvc

* 정의 \
  Spring MVC 애플리케이션에서 API를 작성할 때, MockMvc를 사용하여 API의 테스트를 수행할 수 있다. 즉, API 테스트 방법이다.
* 왜 필요한가?\
  MockMvc를 사용하면, API를 실제로 호출하지 않고도 API의 동작을 시뮬레이션하여 API의 동작을 검증할 수 있다.
* 특징\

* 사용예시\

* 개인적인 생각(추가적인 질문 또는 내용)\

* 레퍼런스 모음\
  [https://cordcat.tistory.com/90](https://cordcat.tistory.com/90)

## MockBean

* 정의 \
  Mock은 껍데기만 있는 객체를 의미하며, MockBean은 given에서 선언한 코드 외에는 모두 가짜 객체로 만들어서 필요한 부분만 테스트하게 해주는 역할을 합니다.
* 왜 필요한가?\
  애플리케이션을 테스트 할 때 불필요한 메서드들도 같이 테스트가 이루어지기 때문에 특정 부분을 제외하고 효율적으로 테스트하기 위해 필요하다.
* 특징\
  1\) 기존에 사용되던 스프링 Bean이 아닌 MockBean을 주입한다.\
  2\) 어노테이션 내부에 문자열을 등록하는 것은 기존에 선언된 Bean 객체를 덮어쓰기 위함이다.\
  3\) 만약 Bean의 이름을 강제로 지정하지 않으면, 스프링에서 어떤 Bean을 가져와야 할지 알수없어 오류가 발생한다.
* 사용방법\

* 개인적인 생각(추가적인 질문 또는 내용)\
  비교적 제외할 내용이나 메서드가 많은 때 사용해야 되는 기능인 것 같다.
* 레퍼런스 모음\
  [https://velog.io/@joosing/what-is-mock-bean](https://velog.io/@joosing/what-is-mock-bean)\
  [https://jojoldu.tistory.com/226](https://jojoldu.tistory.com/226)

## @WebMvcTest

* 정의 \
  Mvc를 위한 테스트.
* 왜 필요한가?\

*   특징\
    1\) 웹에서 테스트하기 힘든 컨트롤러를 테스트하기 적합하다.\
    2\) 웹상에서 요청과 응답에 대해 테스트 할 수 있다.\
    3\) 시큐리티, 필터까지 자동으로 테스트하고, 수동으로 추가/삭제 가능\
    4\) @SpringBootTest 어노테이션보다 가볍게 테스트 할 수 있다.\
    5\) `@Controller`, `@ControllerAdvice`, `@JsonComponent`, `Converter`, `GenericConverter`, `Filter`, `HandlerInterceptor 와 같은 내용만 스캔하도록 제한한다.`\
    `6)의존성이 끊기기 때문에 서비스와 같은 객체는 MockBean을 사용해서 만들어 사용해야 한다.`


* 사용예시\

* 개인적인 생각(추가적인 질문 또는 내용)\

* 레퍼런스 모음\
  [https://amaran-th.github.io/Spring/\[Spring\]%20Test/](https://amaran-th.github.io/Spring/\[Spring]%20Test/)
