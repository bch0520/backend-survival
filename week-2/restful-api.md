# 🔸 참고자료 - RESTful 웹 API 디자인

## 잘 디자인 된 웹 API 특성

1. 플랫폼 독립성 : 모든 클라이언트는 웹 api 내부가 어떻게 구현되었는지 상관없이  api를 호출 할 수 있어야 한다.
2. 서비스 진화 : 웹 api는 클라이언트 어플리케이션과는 독립적으로 기능을  진화시키고 추가할 수 있어야 한다.

## REST 란?

REST는 분산 시스템을 구축하기 위한 아키텍처 스타일의 하나이다. 이는 프로토콜과도 독립적이며, HTTP에 연결될 필요가 없다. 그러나 대부분의 REST API는 HTTP를 애플리케이션 프로토콜로 사용한다. \


REST가 HTTP보다 우수한 주요 장점은 개방형 표준을 사용하므로 api 또는 애플리케이션 구현이 특정 구현에 한정 되지 않는다는 것이다. 예를들면 REST 웹 서비스는 ASP.NET으로 작성하고, 클라이언트 어플리케이션은 HTTP 요청을 생성하고 HTTP 응답을 구문 분석할 수 있는 모든 언어 및 도구를 사용할 수 있다.

## HTTP 를 사용하는 RESTful API의 기본원칙

1. REST API는 리소스를 중심으로 디자인 되며, 클라이언트에서 접근할 수 있는 모든 데이터, 개체, 서비스가 리소스에 포함된다.
2. 리소스마다 해당 리소스를 고유하게 식별하는 URI인 식별자가 있다.
3. 클라이언트가 리소스의 표현을 교환하여 서비스와 상호작용한다. 많은 웹 API가 교환으로 JSON을 형식을 사용한다.
4. REST API는 균일한 인터페이스를 사용하기 때문에, 클라이언트와 표현을 구분할 수 있다.\
   그 예로는 HTTP 기반인 경우에 리소스에 표준 HTTP 동사수행 작업을 수행하는 것이며, 가장 일반적으로는 GET, POST, DELETE, PATCH 등을 사용하는 것이다.
5. REST API 상태 비저장 요청 모델을 사용한다. HTTP 요청은 독립적이고, 임의의 순서대로 발생할 수 있으므로 요청사이에 일시적인 상태정보를 저장할 수 없다. 정보는 리소스 자체에만 저장되기 때문에 웹 확장성이 우수하다. 이는 특정 서버와 클라이언트 사이에 선호도를 유지할 필요가 없음을 의미한다.
6. REST API 표현에 포함된 하이퍼미디어 링크에 따라 구동된다.

## 리소스를 중심으로한 API 디자인 구성 원칙

1. 리소스 URI는 가능하다면 명사(리소스)로만 작성한다. 동사는 리소스에 대한 작업을 수행할 때만 사용한다. (리소스를 생성, 삭제, 수정등을 할때)
2. 리소스는 단일 실제 데이터 항목을 기반으로 할 필요는 없다. 클라이언트에 대해서는 단일 엔티티로만 표현을 하며, 데이터베이스 내부 구조를 반영하는 API를 만들지 않는다.
3. 리소스 URI를 구성할때, 단계적으로 구성하되 너무 복잡하게 구성하지 않는다.\
   customers(컬렉션)/1(항목)/orders(컬렉션) 까지만 작성한다.
4. 리소스를 너무 세분화하여 번잡하게 만들지 말고, 단일 요청을 통해 관련 정보를 검색할 수 있는 더 큰 리소스로 결합한다. 단 이러한 경우에는 불필요한 정보를 가져오지 않도록 오버헤드 균형을 조정해야 한다.
5. 웹 API와 기본데이터 원본 사이에 종속성이 발생하지 않도록 한다. 이는  각 테이블을 리소스 컬렉션으로 표현하지 않고, **매핑**을 통해 독립성을 유지하도록 한다.

## API 비동기 작업

때로는 POST, PUT, DELETE 등의 작업이 시간이 오래걸리는 경우가 있는데, 이런 경우에는 비동기 작업을 고려해야 한다. 요청처리가 수락되었지만 아직 완료되지 않은 202(수락됨) 상태코드를 반환하게 해야한다.\
그리고 새 리소스를 만드는 경우 작업완료 후 상태 엔드포인트에 303(다른 항목 보기)를 반환한다.

## 데이터 필터링 및 페이지 매기기

단순히 /orders로 어떤 데이터를 찾는다면 효율적이지 못할 것이다. 이런 경우에는\
ex) /orders?limit=25\&offset=50 처럼 쿼리 문자열 매개 변수를 추가하여 데이터를 추출한다.

